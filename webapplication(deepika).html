<!DOCTYPE html>
<html>
<head>
    <title>Advanced Expense Tracker</title>
    <style>
        body {
            font-family: Arial;
            background: #f4f4f4;
        }

        .container {
            width: 500px;
            margin: 30px auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px gray;
        }

        h2 {
            text-align: center;
        }

        input, select, button {
            width: 100%;
            padding: 8px;
            margin: 6px 0;
        }

        button {
            background: #28a745;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background: #218838;
        }

        .delete-btn {
            background: red;
            padding: 5px;
            width: auto;
        }

        .edit-btn {
            background: orange;
            padding: 5px;
            width: auto;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li {
            background: #eee;
            margin: 5px 0;
            padding: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .income {
            border-left: 5px solid green;
        }

        .expense {
            border-left: 5px solid red;
        }

        .summary {
            margin-top: 10px;
            font-weight: bold;
        }

        .clear-btn {
            background: darkred;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Expense Tracker</h2>

    <form id="expense-form">
        <input type="text" id="title" placeholder="Title" required>
        <input type="number" id="amount" placeholder="Amount" required>
        <input type="date" id="date" required>

        <select id="category">
            <option value="Food">Food</option>
            <option value="Travel">Travel</option>
            <option value="Shopping">Shopping</option>
            <option value="Bills">Bills</option>
        </select>

        <select id="type">
            <option value="expense">Expense</option>
            <option value="income">Income</option>
        </select>

        <button type="submit">Add Transaction</button>
    </form>

    <select id="filter">
        <option value="All">All Categories</option>
        <option value="Food">Food</option>
        <option value="Travel">Travel</option>
        <option value="Shopping">Shopping</option>
        <option value="Bills">Bills</option>
    </select>

    <ul id="list"></ul>

    <div class="summary">
        Income: ₹<span id="income">0</span> |
        Expense: ₹<span id="expense">0</span> |
        Balance: ₹<span id="balance">0</span>
    </div>

    <button class="clear-btn" onclick="clearAll()">Clear All</button>
</div>

<script>
    const form = document.getElementById("expense-form");
    const list = document.getElementById("list");
    const filter = document.getElementById("filter");

    let transactions = JSON.parse(localStorage.getItem("transactions")) || [];
    let editIndex = -1;

    function updateLocalStorage() {
        localStorage.setItem("transactions", JSON.stringify(transactions));
    }

    function renderTransactions() {
        list.innerHTML = "";

        let income = 0;
        let expense = 0;

        transactions.forEach((t, index) => {

            if(filter.value !== "All" && t.category !== filter.value) return;

            const li = document.createElement("li");
            li.className = t.type;

            li.innerHTML = `
                ${t.title} | ₹${t.amount} | ${t.category} | ${t.date}
                <div>
                    <button class="edit-btn" onclick="editTransaction(${index})">Edit</button>
                    <button class="delete-btn" onclick="deleteTransaction(${index})">X</button>
                </div>
            `;

            list.appendChild(li);

            if(t.type === "income") income += Number(t.amount);
            else expense += Number(t.amount);
        });

        document.getElementById("income").textContent = income;
        document.getElementById("expense").textContent = expense;
        document.getElementById("balance").textContent = income - expense;
    }

    form.addEventListener("submit", function(e) {
        e.preventDefault();

        const transaction = {
            title: document.getElementById("title").value,
            amount: document.getElementById("amount").value,
            date: document.getElementById("date").value,
            category: document.getElementById("category").value,
            type: document.getElementById("type").value
        };

        if(editIndex === -1) {
            transactions.push(transaction);
        } else {
            transactions[editIndex] = transaction;
            editIndex = -1;
        }

        updateLocalStorage();
        renderTransactions();
        form.reset();
    });

    function deleteTransaction(index) {
        transactions.splice(index, 1);
        updateLocalStorage();
        renderTransactions();
    }

    function editTransaction(index) {
        const t = transactions[index];
        document.getElementById("title").value = t.title;
        document.getElementById("amount").value = t.amount;
        document.getElementById("date").value = t.date;
        document.getElementById("category").value = t.category;
        document.getElementById("type").value = t.type;
        editIndex = index;
    }

    function clearAll() {
        transactions = [];
        updateLocalStorage();
        renderTransactions();
    }

    filter.addEventListener("change", renderTransactions);

    renderTransactions();
</script>

</body>
</html>
